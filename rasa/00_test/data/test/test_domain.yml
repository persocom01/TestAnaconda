version: '2.0'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- affirm
- greet
- myInfoResponse
- deny
- bot_challenge
- nlu_fallback
- goodbye
- mood_great
- mood_unhappy
- retrieve_conversation
- check_conversation
- start_form
entities:
- dob
- email
- gender
- mobileNumber
- name
- nationality
- nric
- race
- regAdd
slots:
  myInfo_decision:
    type: bool
    influence_conversation: true
  myInfo_correct:
    type: bool
    influence_conversation: true
  correct_myInfo:
    type: text
    influence_conversation: false
  name:
    type: text
    influence_conversation: false
  nric:
    type: text
    influence_conversation: false
  mobileNumber:
    type: text
    influence_conversation: false
  email:
    type: text
    influence_conversation: false
  dob:
    type: text
    influence_conversation: false
  gender:
    type: text
    influence_conversation: false
  race:
    type: text
    influence_conversation: false
  nationality:
    type: text
    influence_conversation: false
  regAdd:
    type: text
    influence_conversation: false
responses:
  utter_ask_myInfo_decision:
  - text: Hello! Do you want to retrieve your data using SingPass MyInfo?
  utter_singpass_button:
  - text: |
      Please click on the button below
    custom:
      payload: singpass
      options:
      - MyInfo
  utter_myInfo_summary:
  - text: |
      The following information were retrieved from MyInfo:
      - Name: {name}
      - NRIC: {nric}
      - Mobile Number: {mobileNumber}
      - Email: {email}
      - Gender: {gender}
      - Race: {race}
      - Nationality: {nationality}
      - Date of Birth: {dob}
  utter_ask_myInfo_correct:
  - text: Is the retrieved information correct?
  utter_correct_myInfo:
  - text: Thank you for your confirmation
  utter_incorrect_myInfo:
  - text: Please fill up your personal information in the next few questions.
  utter_goodbye:
  - text: Bye
  utter_iamabot:
  - text: I am a bot, powered by Rasa.
  utter_ask_name:
  - text: What is your full name as appeared in your NRIC?
  utter_ask_nric:
  - text: Please key in your NRIC
  utter_ask_mobileNumber:
  - text: Please key in your mobile number (with country code). Eg. +6598765432
  utter_ask_email:
  - text: What is your email address?
  utter_ask_gender:
  - text: Please key in your gender (Male/Female/Other)
  utter_ask_race:
  - text: Please key in your race (Chinese/Malay/Indian/Other)
  utter_ask_nationality:
  - text: What is your nationality?
  utter_ask_dob:
  - text: Please key in your date of birth in dd/mm/yyyy format.
  utter_personalInfo_summary:
  - text: |
      You have entered the following information:
      - Name: {name}
      - NRIC: {nric}
      - Mobile Number: {mobileNumber}
      - Email: {email}
      - Gender: {gender}
      - Race: {race}
      - Nationality: {nationality}
      - Date of Birth: {dob}
actions:
- action_check_conversation
- action_clear_details
- action_retrieve_conversation
- utter_correct_myInfo
- utter_myInfo_summary
- utter_personalInfo_summary
- utter_singpass_button
- validate_personal_detail_form
- send_personal_details_to_db
forms:
  personal_detail_form:
    name:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    nric:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    mobileNumber:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    email:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    gender:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    race:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    nationality:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
    dob:
    - type: from_text
      not_intent:
      - check_conversation
      - retrieve_conversation
  myInfo_decision_form:
    myInfo_decision:
    - type: from_intent
      value: true
      intent: affirm
      not_intent:
      - check_conversation
      - retrieve_conversation
    - type: from_intent
      value: false
      intent: deny
      not_intent:
      - check_conversation
      - retrieve_conversation
  myInfo_correct_form:
    myInfo_correct:
    - type: from_intent
      value: true
      intent: affirm
      not_intent:
      - check_conversation
      - retrieve_conversation
    - type: from_intent
      value: false
      intent: deny
      not_intent:
      - check_conversation
      - retrieve_conversation
